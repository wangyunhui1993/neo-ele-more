<script>
import util from "static/util.js"
export default {
	onLaunch: function() {
		console.log('App Launch');
		const userInfo = uni.getStorageSync('userInfo');
		if(userInfo){
			this.globalData.userInfo = userInfo
		}
	},
	onShow: function() {
		console.log('App Show');
		this.getConfigList();
	},
	onHide: function() {
		console.log('App Hide');
	},
	globalData: {
		api: util.api,
		subscribe: util.subscribe,
		openid: '',
		userInfo: '',
		configList:[]
	},
	methods: {
		shareConfig(){
			var messages = util.messages;
			return messages[Math.floor(Math.random()*messages.length)];
		},
		// 获取config
		getConfigList(){
			uni.request({
			    url: this.globalData.api.config,
			    success: (res) => {
					this.globalData.configList = res.data.data;
			    }
			});
		},
		getConfig(type){
			for(var item of this.globalData.configList){
				if(item.type === type){
					return item.value;
				}
			}
		},
	}
};
</script>

<style>

</style>
